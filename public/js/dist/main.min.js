"use strict";var chatForm=document.getElementById("chat-form"),chatMessages=document.querySelector(".chat-messages"),roomName=document.getElementById("room-name"),userList=document.getElementById("users"),_Qs$parse=Qs.parse(location.search,{ignoreQueryPrefix:!0}),username=_Qs$parse.username,room=_Qs$parse.room,socket=io();function outputMessage(e){var t=document.createElement("div");t.classList.add("message");var s=document.createElement("p");s.classList.add("meta"),s.innerText=e.username,s.innerHTML+="<span>".concat(e.time,"</span>"),t.appendChild(s);var n=document.createElement("p");n.classList.add("text"),n.innerText=e.text,t.appendChild(n),document.querySelector(".chat-messages").appendChild(t)}function outputRoomName(e){roomName.innerText=e}function outputUsers(e){userList.innerHTML="",e.forEach(function(e){var t=document.createElement("li");t.innerText=e.username,userList.appendChild(t)})}socket.emit("joinRoom",{username:username,room:room}),socket.on("roomUsers",function(e){var t=e.room,s=e.users;outputRoomName(t),outputUsers(s)}),socket.on("message",function(e){console.log(e),outputMessage(e),chatMessages.scrollTop=chatMessages.scrollHeight}),chatForm.addEventListener("submit",function(e){e.preventDefault();var t=e.target.elements.msg.value;if(!(t=t.trim()))return!1;socket.emit("chatMessage",t),e.target.elements.msg.value="",e.target.elements.msg.focus()}),document.getElementById("leave-btn").addEventListener("click",function(){confirm("Want to leave the chatroom?")&&(window.location="../index.html")});
//# sourceMappingURL=main.min.js.map
